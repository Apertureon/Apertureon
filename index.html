<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Photography Work</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>
<script src="imageList.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<header>
    <h1>My Photography Work</h1>
    <p>Exploring the beauty in everyday life</p>
</header>
<div class="content">
    <section class="gallery">
        <!-- Photos will be dynamically added here -->
    </section>
    <section>
        <h2>About Me</h2>
        <p>I am a photography enthusiast. My equipment: Nikon Z6.</p>
    </section>
    <section>
        <h2>Contact</h2>
        <p>If you need to contact me, please email: example@email.com</p>
    </section>
</div>
<footer>
    <p>&copy; 2024 My Photography Work</p>
</footer>
<script>
    window.onload = function() {
        const gallery = document.querySelector('.gallery'); // Get the gallery element
    
        imageList.forEach((src, index) => {
            // Create div for each photo
            const photoDiv = document.createElement('div');
            photoDiv.className = 'photo';
            photoDiv.id = 'photo' + index;
    
            // Create img element
            const img = document.createElement('img');
            img.src = src;
            img.alt = 'Photo ' + (index + 1);
    
            // Create details div
            const detailsDiv = document.createElement('div');
            detailsDiv.className = 'details';
            detailsDiv.id = 'exif-data' + index;
    
            // Append img and detailsDiv to photoDiv
            photoDiv.appendChild(img);
            photoDiv.appendChild(detailsDiv);
    
            // Append photoDiv to gallery
            gallery.appendChild(photoDiv);
    
            // Load EXIF data
            img.onload = function() {
                EXIF.getData(img, function() {
                    var aperture = EXIF.getTag(this, 'FNumber');
                    var shutterSpeed = EXIF.getTag(this, 'ExposureTime');
                    var iso = EXIF.getTag(this, 'ISOSpeedRatings');

                    if (!aperture && !shutterSpeed && !iso) {
                    console.log('No EXIF Data found for:', img.src);
                    }
        
                    detailsDiv.innerHTML = 
                    `f/${aperture ? aperture.numerator / aperture.denominator : 'N/A'} | ${shutterSpeed ? shutterSpeed.numerator + '/' + shutterSpeed.denominator + ' sec' : 'N/A'} | ISO ${iso || 'N/A'}`;
                    ;
                });
            };
        });
    };
    document.addEventListener('DOMContentLoaded', function() {
        const images = document.querySelectorAll('.gallery .photo img');
        console.log(images.length + " images found");  // Check how many images are being selected
        images.forEach(img => {
            const setClassBasedOnRatio = function() {
                const ratio = img.naturalWidth / img.naturalHeight;
                console.log(img.src + " ratio: " + ratio);  // Log the ratio
                if (ratio >= 2) {
                    img.parentNode.classList.add('panoramic');
                } else if (ratio >= 1) {
                    img.parentNode.classList.add('horizontal');
                } else {
                    img.parentNode.classList.add('vertical');
                }
            };

            if (img.complete) {
                setClassBasedOnRatio(); // Call immediately if image is already loaded
            } else {
                img.onload = setEachClassBasedOnRatio; // Setup event if not yet loaded
            }
        });
    });
</script>
</body>
</html>
